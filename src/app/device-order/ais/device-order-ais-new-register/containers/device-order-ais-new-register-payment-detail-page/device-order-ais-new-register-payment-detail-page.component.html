<div class="mc-flex">
  <mc-header title="เครื่องพร้อมเปิดเบอร์ใหม่">
    <div class="header-icon-left">
      <mc-header-icon src="assets/images/icon/icon-back.png" (iconClick)="onBack()"></mc-header-icon>
    </div>
    <div class="header-icon-right">
      <mc-header-icon src="assets/images/icon/icon-home.png" (iconClick)="onHome()"></mc-header-icon>
    </div>
  </mc-header>
  <div class="mc-flex-wrap">
    <div class="mt-3">
      <mc-wizard [wizards]="wizards" active="1"></mc-wizard>
      <!-- ############################################## payment detail ##############################################  -->
      <div class="container-fluid">
        <div class="card mb-3">
          <div class="card-header bg-orange text-white rounded-top p-3">
            รูปแบบการชำระเงิน
          </div>
          <div class="card-header text-light-green bg-transparent">
            ค่าเครื่อง iPhone X 256GB สี SPACE GREY
            <span class="pull-right">฿ {{ 1070 | number: '1.2-2' }}</span>
          </div>
          <div class="card-body">
            <form [formGroup]="paymentForm">
              <div class="form-group row">
                <div class="col-12 col-sm-5">
                  <input class="form-check-input" type="radio" name="paymentTypeRadio" id="payment-qrcode" value="qrcode"
                    formControlName="paymentTypeRadio">
                  <label class="form-check-label" for="payment-qrcode">
                    ชำระเงิน QR Code
                  </label>
                </div>
                <div class="col-12 col-sm-7">
                  <input type="text" readonly class="form-control-plaintext" id="staticEmail" value="เต็มจำนวน">
                </div>
              </div>
              <div class="form-group row" *ngIf="paymentForm.controls['paymentTypeRadio'].value === 'qrcode'">
                <div class="col-6 col-sm-3" *ngFor="let qrCode of qrCodes; let i = index" (click)="onSelectQRCode(qrCode)">
                  <div class="qr-lazy-load-image" [ngClass]="{'active': qrCode?.id === selectQRCode?.id}">
                    <mc-lazy-load-image [src]="qrCode.imageUrl"></mc-lazy-load-image>
                  </div>
                </div>
              </div>
              <hr>
              <div class="form-group row">
                <div class="col-12 col-sm-5">
                  <input class="form-check-input" type="radio" name="paymentTypeRadio" id="payment-credit" value="credit"
                    formControlName="paymentTypeRadio">
                  <label class="form-check-label" for="payment-credit">
                    ชำระเงินด้วยบัตรเครดิต
                  </label>
                </div>
                <div class="col-12 col-sm-7">
                  <select id="inputState" class="form-control" disabled>
                    <option [selected]="paymentType === 'CA'">เต็มจำนวน</option>
                    <option [selected]="paymentType !== 'CA'">ผ่อนชำระ</option>
                  </select>
                </div>
              </div>
              <div class="form-group row" *ngIf="paymentForm.controls['paymentTypeRadio'].value === 'credit'">

                <div class="col-4 col-sm-2 mb-3" *ngFor="let bank of banks; let i = index" (click)="onSelectBank(bank)">
                  <div class="bank-lazy-load-image" [ngClass]="{'active': bank?.abb === selectBank?.abb}">
                    <mc-lazy-load-image [src]="bank?.imageUrl"></mc-lazy-load-image>
                  </div>
                </div>
                <div class="col-12 text-left mb-3" *ngIf="!selectBank">
                  <span class="text-pink">*กรุณาเลือธนาคาร</span>
                </div>
              </div>
              <div class="form-group row" *ngIf="(paymentType !== 'CA') && installments && paymentForm.controls['paymentTypeRadio'].value === 'credit'">
                <div class="col-12 text-center mb-3">
                  <span class="text-pink">*กรุณาเลือกรูปแบบการชำระเงิน</span>
                </div>
                <div class="col-12 col-sm-4" *ngFor="let installment of installments; let i = index">
                  <input class="form-check-input" type="radio" name="installment" id="installment-month-{{ i }}" value="installment"
                    (click)="onSelectInstallment(installment)" [checked]="installment?.installmentMounth === selectBank?.installment?.installmentMounth && installment?.installmentPercentage === selectBank?.installment?.installmentPercentage">
                  <label class="form-check-label" for="installment-month-{{ i }}">
                    {{ installment?.installmentPercentage }}% {{ installment?.installmentMounth }} เดือน
                  </label>
                </div>
              </div>
              <hr>
              <div class="form-group row">
                <div class="col-12 col-sm-5">
                  <input class="form-check-input" type="radio" name="paymentTypeRadio" id="payment-debit" value="debit"
                    formControlName="paymentTypeRadio">
                  <label class="form-check-label" for="payment-debit">
                    ชำระที่เคาน์เตอร์
                  </label>
                </div>
                <div class="col-12 col-sm-7">
                  <input type="text" readonly class="form-control-plaintext" id="staticEmail" value="เต็มจำนวน">
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- ############################################## advance payment ##############################################  -->

      <mc-receipt-info [receiptInfo]="receiptInfo"></mc-receipt-info>
    </div>
  </div>
  <mc-footer>
    <button class="btn btn-secondary" (click)="onBack()">BACK</button>
    <button class="btn btn-success" (click)="onNext()" [disabled]="!error">NEXT</button>
  </mc-footer>
</div>