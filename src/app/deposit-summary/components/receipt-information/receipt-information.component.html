<div class="mc-flex">
  <mc-header title="การจองสินค้า">
    <div class="header-icon-left">
      <mc-header-icon src="assets/images/icon/icon-back.png" (iconClick)="onBack()"></mc-header-icon>
    </div>
    <div class="header-icon-right">
      <mc-header-icon src="assets/images/icon/icon-home.png" (iconClick)="onHome()"></mc-header-icon>
    </div>
  </mc-header>
  <div class="mc-flex-wrap">
    <div class="mt-3">
      <mc-wizard [wizards]="wizards" active="2"></mc-wizard>
    </div>
    <div class="container-fluid">
      <div class="card mb-3">
        <div class="card-body text-right ">
          <div class="row">
            <div id="product" class="col-12 col-sm-3">
              <mc-lazy-load-image [src]="productImage"></mc-lazy-load-image>
            </div>
            <div class="col-sm-9 mt-0">
              <div class="row">
                <div class="col-12 col-sm-2 text-secondary">
                  Model :
                </div>
                <div class="col-12 col-sm-7 text-left">
                  {{ priceOption?.trade?.model }}
                </div>
              </div>
              <br>
              <div class="row">
                <div class="col-12 col-sm-2 text-secondary">
                  สี :
                </div>
                <div>
                  <a class="circle-qty " [ngStyle]="colorCodeStyle"></a>
                </div>
              </div>
              <br>
              <div class="row">
                <div class="col-12 col-sm-2 text-secondary">
                  จำนวน :
                </div>
                <div class="col-12 col-sm-7 text-left">
                  1
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div class="card mb-3">
        <div class="card-header bg-light-blue text-white">
          ข้อมูลใบเสร็จรับเงิน
        </div>
        <div class="card-footer bg-transparent">
          <div>
            <app-billing-address [titleNames]="titleName" [customerAddress]="customerAddress"
              [allZipCodes]="allZipCodes" [provinces]="getProvinces()" [amphurs]="amphurs" [tumbols]="tumbols"
              [zipCodes]="zipCode" (provinceSelected)="onProvinceSelected($event)"
              (amphurSelected)="onAmphurSelected($event)" (tumbolSelected)="onTumbolSelected($event)"
              (zipCodeSelected)="onZipCodeSelected($event)" (completed)="onCompleted($event)" (error)="onError($event)"
              [keyInCustomerAddressTemp]="keyInCustomerAddressTemp"></app-billing-address>
          </div>
          <ng-template #customerDetail>
            <div>
              <label class="text-grey">ผู้ซื้อ &nbsp;&nbsp;&nbsp;{{ nameText }} </label>
            </div>
            <div>
              <label class="text-grey">ที่อยู่ใบเสร็จรับเงิน &nbsp;&nbsp;&nbsp;{{ billingAddressText }}</label>
            </div>
          </ng-template>
        </div>
        <div class="card-footer bg-transparent">
          <form [formGroup]="receiptInfoForm" class="pt-2">
            <div class="form-group row">
              <label for="taxId" class="col-12 col-sm-3 col-form-label" id="txtTaxID">Tax Id </label>
              <div class="col-12 col-sm-9">
                <input type="text" class="form-control" id="taxId" formControlName="taxId"
                  [value]="receiptInfoForm.get('taxId').value | idCard" readonly />
              </div>
            </div>
            <div class="form-group row">
              <label for="branch" class="col-12 col-sm-3 col-form-label" id="txtBranch">สาขาที่</label>
              <div class="col-12 col-sm-9">
                <input type="text" class="form-control" id="branch" formControlName="branch" readonly />
              </div>
            </div>
            <div class="form-group row">
              <label for="telNo" class="col-12 col-sm-3 col-form-label" id="txtTelNo">
                เบอร์ติดต่ออื่น
                <span class="text-red"> *</span>
              </label>
              <div class="col-12 col-sm-9">
                <input type="text" maxlength="10" class="form-control" id="telNo" formControlName="telNo"
                  [ngClass]="{ 'is-invalid' : receiptInfoForm.controls.telNo.invalid && receiptInfoForm.controls.telNo.touched }" />
                <small class="form-text invalid-feedback"
                  *ngIf="receiptInfoForm.controls.telNo.touched && receiptInfoForm.controls.telNo.errors">
                  * กรุณากรอกเบอร์ติดต่อให้ถูกต้อง
                </small>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>

    <mc-footer>
      <button class="btn btn-secondary" (click)="onBack()">BACK</button>
      <button class="btn btn-success" (click)="onNext()" [disabled]="isNotFormValid()">NEXT</button>
    </mc-footer>
  </div>
</div>